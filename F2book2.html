<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Necklace</title>
  <style>
  body {
  font-family: Arial, sans-serif;
  background-color: #fffbe7;
  padding: 20px;
  line-height: 1.6;
}

.story-container {
  max-width: 600px;
  margin: auto;
  text-align: center;
}

.book-title {
  font-size: 24px;
  font-weight: bold;
  margin-bottom: 10px;
}

.book-img {
  width: 100%;
  max-height: 300px;
  object-fit: cover;
  border-radius: 8px;
  margin-bottom: 15px;
}

.clickable-word {
  cursor: pointer;
  border-bottom: 1px dotted #888;
  color: inherit;
}

.clickable-word:hover {
  background-color: #ffefc1;
}

.popup {
  position: absolute; 
  background-color: white;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  z-index: 999;
  max-width: 220px;
  display: none;
}

.popup-close {
  text-align: right;
  font-weight: bold;
  cursor: pointer;
  color: red;
  margin-bottom: 5px;
}
.back-button {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
}
.back-button button {
  background-color: #d2b48c; 
  color: white;
  border: none;
  padding: 10px 15px;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.back-button button:hover {
  background-color: #c19a6b;
.toast {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #333;
  color: #fff;
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 16px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  z-index: 9999;
  display: none;
  opacity: 0;
  transition: opacity 0.4s ease;
}


.toast.show {
  animation: slideDown 0.5s ease;
  opacity: 1;
  pointer-events: auto;
}

@keyframes slideDown {
  from {
    transform: translateX(-50%) translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }
}

</style>
</head>
<body>

<div class="story-container">
  <div class="book-title">The Necklace</div>
<br>
  <b><p id="story-text-1">
    The girl was one of those pretty and charming young creatures who sometimes are born, as if by a slip of fate, into a family of clerks. She had no dowry, no expectations, no way of being known, understood, loved, married by any rich and distinguished man; so she let herself be married to a little clerk of the Ministry of Public Instruction.<p>

<p id="story-text-2"> She dressed plainly because she could not dress well, but she was unhappy as if she had really fallen from a higher station; since with women there is neither caste nor rank, for beauty, grace and charm take the place of family and birth. Natural ingenuity, instinct for<p>

<p id="story-text-3">what is elegant, a supple mind are their sole hierarchy, and often make of women of the people the equals of the very greatest ladies.<p>

<p id="story-text-4">Mathilde suffered ceaselessly, feeling herself born to enjoy all delicacies and all luxuries. She was distressed at the poverty of her dwelling, at the bareness of the walls, at the shabby chairs, the ugliness of the curtains. All those things, of which another woman of her rank would never even have been conscious, tortured her and made her angry. The sight of the little Breton peasant who did her humble housework aroused in her despairing regrets and bewildering dreams. She thought of silent antechambers hung with Oriental tapestry, illumined by tall bronze candelabra, and of two great footmen in knee breeches who sleep in the big armchairs, made drowsy by the oppressive heat of the stove. She thought of long reception halls hung with ancient silk, of the dainty cabinets containing priceless curiosities and of the little coquettish perfumed reception rooms made for chatting at five o'clock with intimate friends, with men famous and sought after, whom all women envy and whose attention they all desire.<p>

<p id="story-text-5">When she sat down to dinner, before the round table covered with a tablecloth in use three days, opposite her husband, who uncovered the soup tureen and declared with a delighted air, "Ah, the good soup! I don't know anything better than that," she thought of dainty dinners, of shining silverware, of tapestry that peopled the walls with ancient personages and with strange birds flying in the midst of a fairy forest; and she thought of delicious dishes served on marvellous plates and of the whispered gallantries to which you listen with a sphinxlike smile while you are eating the pink meat of a trout or the wings of a quail.<p>

<p id="story-text-6">She had no gowns, no jewels, nothing. And she loved nothing but that. She felt made for that. She would have liked so much to please, to be envied, to be charming, to be sought after.<p>

<p id="story-text-7">She had a friend, a former schoolmate at the convent, who was rich, and whom she did not like to go to see any more because she felt so sad when she came home.<p>

<p id="story-text-8">But one evening her husband reached home with a triumphant air and holding a large envelope in his hand.<p>

<p id="story-text-9">"There," said he, "there is something for you."<p>

<p id="story-text-10">She tore the paper quickly and drew out a printed card which bore these words:<p>

<p id="story-text-11">The Minister of Public Instruction and Madame Georges Ramponneau request the honor of M. and Madame Loisel's company at the palace of the Ministry on Monday evening, January 18th.<p>

<p id="story-text-12">Instead of being delighted, as her husband had hoped, she threw the invitation on the table crossly, muttering:<p>

<p id="story-text-13">"What do you wish me to do with that?"<p>

<p id="story-text-14">"Why, my dear, I thought you would be glad. You never go out, and this is such a fine opportunity. I had great trouble to get it. Every one wants to go; it is very select, and they are not giving many invitations to clerks. The whole official world will be there."<p>

<p id="story-text-15">She looked at him with an irritated glance and said impatiently:<p>

<p id="story-text-16">"And what do you wish me to put on my back?"<p>

<p id="story-text-17">He had not thought of that. He stammered:<p>

<p id="story-text-18">"Why, the gown you go to the theatre in. It looks very well to me."<p>

<p id="story-text-19">He stopped, distracted, seeing that his wife was weeping. Two great tears ran slowly from the corners of her eyes toward the corners of her mouth.<p>

<p id="story-text-20">"What's the matter? What's the matter?" he answered.

<p id="story-text-21">By a violent effort she conquered her grief and replied in a calm voice, while she wiped her wet cheeks:<p>

<p id="story-text-22">"Nothing. Only I have no gown, and, therefore, I can't go to this ball. Give your card to some colleague whose wife is better equipped than I am."<p>

<p id="story-text-23">He was in despair. He resumed:<p>

<p id="story-text-24">"Come, let us see, Mathilde. How much would it cost, a suitable gown, which you could use on other occasions--something very simple?"<p>

<p id="story-text-25">She reflected several seconds, making her calculations and wondering also what sum she could ask without drawing on herself an immediate refusal and a frightened exclamation from the economical clerk.
<p>
<p id="story-text-26">Finally she replied hesitating:<p>

<p id="story-text-27">"I don't know exactly, but I think I could manage it with four hundred francs."<p>

<p id="story-text-28">He grew a little pale, because he was laying aside just that amount to buy a gun and treat himself to a little shooting next summer on the plain of Nanterre, with several friends who went to shoot larks there of a Sunday.<p>

<p id="story-text-29">But he said:<p>

<p id="story-text-30">"Very well. I will give you four hundred francs. And try to have a pretty gown."<p>

<p id="story-text-31">The day of the ball drew near and Madame Loisel seemed sad, uneasy, anxious. Her frock was ready, however. Her husband said to her one evening:<p>

<p id="story-text-32">"What is the matter? Come, you have seemed very queer these last three days."<p>

<p id="story-text-33">And she answered:<p>

<p id="story-text-34">"It annoys me not to have a single piece of jewelry, not a single ornament, nothing to put on. I shall look poverty-stricken. I would almost rather not go at all."<p>

<p id="story-text-35">"You might wear natural flowers," said her husband. "They're very stylish at this time of year. For ten francs you can get two or three magnificent roses."<p>

<p id="story-text-36">She was not convinced.<p>

<p id="story-text-37">"No; there's nothing more humiliating than to look poor among other women who are rich."<p>

<p id="story-text-38">"How stupid you are!" her husband cried. "Go look up your friend, Madame Forestier, and ask her to lend you some jewels. You're intimate enough with her to do that."<p>

<p id="story-text-39">She uttered a cry of joy:<p>

<p id="story-text-40">"True! I never thought of it."<p>

<p id="story-text-41">The next day she went to her friend and told her of her distress.<p>

<p id="story-text-42">Madame Forestier went to a wardrobe with a mirror, took out a large jewel box, brought it back, opened it and said to Madame Loisel:<p>

<p id="story-text-43">"Choose, my dear."<p>

<p id="story-text-44">She saw first some bracelets, then a pearl necklace, then a Venetian gold cross set with precious stones, of admirable workmanship. She tried on the ornaments before the mirror, hesitated and could not make up her mind to part with them, to give them back. She kept asking:<p>

<p id="story-text-45">"Haven't you any more?"<p>

<p id="story-text-46">"Why, yes. Look further; I don't know what you like."<p>

<p id="story-text-47">Suddenly she discovered, in a black satin box, a superb diamond necklace, and her heart throbbed with an immoderate desire. Her hands trembled as she took it. She fastened it round her throat, outside her high-necked waist, and was lost in ecstasy at her reflection in the mirror.<p>

<p id="story-text-48">Then she asked, hesitating, filled with anxious doubt:<p>

<p id="story-text-49">"Will you lend me this, only this?"<p>

<p id="story-text-50">"Why, yes, certainly."<p>

<p id="story-text-51">She threw her arms round her friend's neck, kissed her passionately, then fled with her treasure.<p>

<p id="story-text-52">The night of the ball arrived. Madame Loisel was a great success. She was prettier than any other woman present, elegant, graceful, smiling and wild with joy. All the men looked at her, asked her name, sought to be introduced. All the attaches of the Cabinet wished to waltz with her. She was remarked by the minister himself.<p>

<p id="story-text-53">She danced with rapture, with passion, intoxicated by pleasure, forgetting all in the triumph of her beauty, in the glory of her success, in a sort of cloud of happiness comprised of all this homage, admiration, these awakened desires and of that sense of triumph which is so sweet to woman's heart.<p>

<p id="story-text-54">She left the ball about four o'clock in the morning. Her husband had been sleeping since midnight in a little deserted anteroom with three other gentlemen whose wives were enjoying the ball.<p>

<p id="story-text-55">He threw over her shoulders the wraps he had brought, the modest wraps of common life, the poverty of which contrasted with the elegance of the ball dress. She felt this and wished to escape so as not to be remarked by the other women, who were enveloping themselves in costly furs.<p>

<p id="story-text-56">Loisel held her back, saying: "Wait a bit. You will catch cold outside. I will call a cab."<p>

<p id="story-text-57">But she did not listen to him and rapidly descended the stairs. When they reached the street they could not find a carriage and began to look for one, shouting after the cabmen passing at a distance.<p>

<p id="story-text-58">They went toward the Seine in despair, shivering with cold. At last they found on the quay one of those ancient night cabs which, as though they were ashamed to show their shabbiness during the day, are never seen round Paris until after dark.<p>

<p id="story-text-59">It took them to their dwelling in the Rue des Martyrs, and sadly they mounted the stairs to their flat. All was ended for her. As to him, he reflected that he must be at the ministry at ten o'clock that morning.<p>

<p id="story-text-60">She removed her wraps before the glass so as to see herself once more in all her glory. But suddenly she uttered a cry. She no longer had the necklace around her neck!<p>

<p id="story-text-61">"What is the matter with you?" demanded her husband, already half undressed.<p>

<p id="story-text-62">She turned distractedly toward him.<p>

<p id="story-text-63">"I have--I have--I've lost Madame Forestier's necklace," she cried.<p>

<p id="story-text-64">He stood up, bewildered.<p>

<p id="story-text-65">"What!--how? Impossible!"<p>

<p id="story-text-66">They looked among the folds of her skirt, of her cloak, in her pockets, everywhere, but did not find it.<p>

<p id="story-text-67">"You're sure you had it on when you left the ball?" he asked.<p>

<p id="story-text-68">"Yes, I felt it in the vestibule of the minister's house."<p>

<p id="story-text-69">"But if you had lost it in the street we should have heard it fall. It must be in the cab."<p>

<p id="story-text-70">"Ye<p>

<p id="story-text-71">"Yes, probably. Did you take his number?"<p>

<p id="story-text-72">"No. And you--didn't you notice it?"<p>

<p id="story-text-73">"No."<p>

<p id="story-text-74">They looked, thunderstruck, at each other. At last Loisel put on his clothes.<p>

<p id="story-text-75">"I shall go back on foot," said he, "over the whole route, to see whether I can find it."<p>

<p id="story-text-76">He went out. She sat waiting on a chair in her ball dress, without strength to go to bed, overwhelmed, without any fire, without a thought.<p>

<p id="story-text-77">Her husband returned about seven o'clock. He had found nothing.<p>

<p id="story-text-78">He went to police headquarters, to the newspaper offices to offer a reward; he went to the cab companies--everywhere, in fact, whither he was urged by the least spark of hope.<p>

<p id="story-text-79">She waited all day, in the same condition of mad fear before this terrible calamity.<p>

<p id="story-text-80">Loisel returned at night with a hollow, pale face. He had discovered nothing.<p>

<p id="story-text-81">"You must write to your friend," said he, "that you have broken the clasp of her necklace and that you are having it mended. That will give us time to turn round."<p>

<p id="story-text-82">She wrote at his dictation.<p>

<p id="story-text-83">At the end of a week they had lost all hope. Loisel, who had aged five years, declared:<p>

<p id="story-text-84">"We must consider how to replace that ornament."<p>

<p id="story-text-85">The next day they took the box that had contained it and went to the jeweler whose name was found within. He consulted his books.<p>

<p id="story-text-86">"It was not I, madame, who sold that necklace; I must simply have furnished the case."<p>

<p id="story-text-87">Then they went from jeweler to jeweler, searching for a necklace like the other, trying to recall it, both sick with chagrin and grief.<p>

<p id="story-text-88">They found, in a shop at the Palais Royal, a string of diamonds that seemed to them exactly like the one they had lost. It was worth forty thousand francs. They could have it for thirty-six.<p>

<p id="story-text-89">So they begged the jeweler not to sell it for three days yet. And they made a bargain that he should buy it back for thirty-four thousand francs, in case they should find the lost necklace before the end of February.<p>

<p id="story-text-90">Loisel possessed eighteen thousand francs which his father had left him. He would borrow the rest.<p>

<p id="story-text-91">He did borrow, asking a thousand francs of one, five hundred of another, five louis here, three louis there. He gave notes, took up ruinous obligations, dealt with usurers and all the race of lenders. He compromised all the rest of his life, risked signing a note without even knowing whether he could meet it; and, frightened by the trouble yet to come, by the black misery that was about to fall upon him, by the prospect of all the physical privations and moral tortures that he was to suffer, he went to get the new necklace, laying upon the jeweler's counter thirty-six thousand francs.<p>

<p id="story-text-92">When Madame Loisel took back the necklace Madame Forestier said to her with a chilly manner:<p>

<p id="story-text-93">"You should have returned it sooner; I might have needed it."<p>

<p id="story-text-94">She did not open the case, as her friend had so much feared. If she had detected the substitution, what would she have thought, what would she have said? Would she not have taken Madame Loisel for a thief?<p>

<p id="story-text-95">Thereafter Madame Loisel knew the horrible existence of the needy. She bore her part, however, with sudden heroism. That dreadful debt must be paid. She would pay it. They dismissed their servant; they changed their lodgings; they rented a garret under the roof.<p>

<p id="story-text-96">She came to know what heavy housework meant and the odious cares of the kitchen. She washed the dishes, using her dainty fingers and rosy nails on greasy pots and pans. She washed the soiled linen, the shirts and the dishcloths, which she dried upon a line; she carried the slops down to the street every morning and carried up the water, stopping for breath at every landing. And dressed like a woman of the people, she went to the fruiterer, the grocer, the butcher, a basket on her arm, bargaining, meeting with impertinence, defending her miserable money, sou by sou.<p>

<p id="story-text-97">Every month they had to meet some notes, renew others, obtain more time.<p>

<p id="story-text-98">Her husband worked evenings, making up a tradesman's accounts, and late at night he often copied manuscript for five sous a page.<p>

<p id="story-text-99">This life lasted ten years.<p>

<p id="story-text-100">At the end of ten years they had paid everything, everything, with the rates of usury and the accumulations of the compound interest.<p>

<p id="story-text-101">Madame Loisel looked old now. She had become the woman of impoverished households--strong and hard and rough. With frowsy hair, skirts askew and red hands, she talked loud while washing the floor with great swishes of water. But sometimes, when her husband was at the office, she sat down near the window and she thought of that gay evening of long ago, of that ball where she had been so beautiful and so admired.<p>

<p id="story-text-102">What would have happened if she had not lost that necklace? Who knows? who knows? How strange and changeful is life! How small a thing is needed to make or ruin us!<p>

<p id="story-text-103">But one Sunday, having gone to take a walk in the Champs Elysees to refresh herself after the labors of the week, she suddenly perceived a woman who was leading a child. It was Madame Forestier, still young, still beautiful, still charming.<p>

<p id="story-text-104">Madame Loisel felt moved. Should she speak to her? Yes, certainly. And now that she had paid, she would tell her all about it. Why not?<p>

<p id="story-text-105">She went up.<p>

<p id="story-text-106">"Good-day, Jeanne."<p>

<p id="story-text-107">The other, astonished to be familiarly addressed by this plain good-wife, did not recognize her at all and stammered:<p>

<p id="story-text-108">"But--madame!--I do not know--You must have mistaken."<p>

<p id="story-text-109">"No. I am Mathilde Loisel."<p>

<p id="story-text-110">Her friend uttered a cry.<p>

<p id="story-text-111">"Oh, my poor Mathilde! How you are changed!"<p>

<p id="story-text-112">"Yes, I have had a pretty hard life, since I last saw you, and great poverty--and that because of you!"<p>

<p id="story-text-113">"Of me! How so?"<p>

<p id="story-text-114">"Do you remember that diamond necklace you lent me to wear at the ministerial ball?"<p>

<p id="story-text-115">"Yes. Well?"<p>

<p id="story-text-116">"Well, I lost it."<p>

<p id="story-text-117">"What do you mean? You brought it back.""I brought you back another exactly like it. And it has taken us ten years to pay for it. You can understand that it was not easy for us, for us who had nothing. At last it is ended, and I am very glad."<p>

<p id="story-text-118">Madame Forestier had stopped.<p>

<p id="story-text-119">"You say that you bought a necklace of diamonds to replace mine?"<p>

<p id="story-text-120">"Yes. You never noticed it, then! They were very similar."
<p>
<p id="story-text-121">And she smiled with a joy that was at once proud and ingenuous.<p>

<p id="story-text-122">Madame Forestier, deeply moved, took her hands.<p>

<p id="story-text-123">"Oh, my poor Mathilde! Why, my necklace was fake! It was
worth at most only five hundred francs!"<p></b>

</p>
</div>

<div id="toast" class="toast">Book recorded</div>

<div id="popup" class="popup" style="display: none;">
  <div class="popup-close" onclick="closePopup()">×</div>
  <div id="popup-text">Loading...</div>
</div>

<div class="back-button">
  <button onclick="window.location.href='file1.html'">← Back</button>
</div>

<script>
  const title = "necklace";
  const image = "necklace.jpeg";
  const start = Date.now();
  const activeUser = localStorage.getItem("activeUser");
  let users = JSON.parse(localStorage.getItem("users") || "{}");

  document.addEventListener("DOMContentLoaded", () => {
    for (let i = 1; i <= 150; i++) {
      const storyEl = document.getElementById(`story-text-${i}`);
      if (!storyEl) continue;

      const originalText = storyEl.innerText;

      function makeWordsClickable(text) {
        return text.split(/(\s+)/).map(word => {
          if (word.trim() === "") return word;
          const clean = word.replace(/[.,!?":;()]/g, "");
          return `<span class="clickable-word" data-word="${clean}">${word}</span>`;
        }).join("");
      }

      storyEl.innerHTML = makeWordsClickable(originalText);
    }

    document.querySelectorAll(".clickable-word").forEach(word => {
      word.addEventListener("click", async (e) => {
        const rawWord = e.target.dataset.word.toLowerCase();
        const popup = document.getElementById("popup");
        const popupText = document.getElementById("popup-text");

        popupText.textContent = `Searching "${rawWord}"...`;
        popup.style.display = "block";

        const popupWidth = popup.offsetWidth;
        const pageX = e.pageX;
        const pageY = e.pageY - 60;

        if (pageX + popupWidth > window.innerWidth) {
          popup.style.left = `${window.innerWidth - popupWidth - 10}px`;
        } else {
          popup.style.left = `${pageX}px`;
        }

        if (window.innerWidth < 400) {
          popup.style.left = "10px";
          popup.style.right = "10px";
        }

        popup.style.top = `${pageY}px`;

        try {
          const res = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${rawWord}`);
          const data = await res.json();

          if (Array.isArray(data)) {
            const meaning = data[0]?.meanings[0]?.definitions[0]?.definition;
            popupText.textContent = `"${rawWord}" means: ${meaning}`;
          } else {
            popupText.textContent = `No definition found for "${rawWord}".`;
          }
        } catch (error) {
          popupText.textContent = `Error getting meaning.`;
        }
      });
    });

    document.addEventListener("click", (e) => {
      const popup = document.getElementById("popup");
      if (!popup.contains(e.target) && !e.target.classList.contains("clickable-word")) {
        popup.style.display = "none";
      }
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        document.getElementById("popup").style.display = "none";
      }
    });
  });

  setTimeout(() => {
    const timeSpent = Date.now() - start;

    if (timeSpent >= 20000 && activeUser && users[activeUser]) {
      const userData = users[activeUser];
      userData.booksRead = userData.booksRead || [];

      const alreadyExists = userData.booksRead.some(book => book.title === title);
      if (!alreadyExists) {
        userData.booksRead.push({ title, image: image });
        users[activeUser] = userData;
        localStorage.setItem("users", JSON.stringify(users));

        const toast = document.getElementById("toast");
        toast.style.display = "block";
        toast.style.opacity = "1";

        setTimeout(() => {
          toast.style.opacity = "0";
          setTimeout(() => {
            toast.style.display = "none";
            toast.style.opacity = "1";
          }, 1000);
        }, 3000);
      }
    }
  }, 20000);

  window.addEventListener("beforeunload", () => {
    const end = Date.now();
    const readingTime = end - start;

    if (activeUser && users[activeUser]) {
      users[activeUser].totalReadingTime = (users[activeUser].totalReadingTime || 0) + readingTime;
      localStorage.setItem("users", JSON.stringify(users));
    }
  });

  function closePopup() {
    document.getElementById("popup").style.display = "none";
  }
</script>


</body>
</html>